kind: app
version: 0.1.5
app:
  name: æ™ºèƒ½å®¢æœè·¯ç”±å·¥ä½œæµ
  description: æ ¹æ®ç”¨æˆ·è¾“å…¥è‡ªåŠ¨åˆ¤æ–­æ„å›¾å¹¶è·¯ç”±åˆ°ç›¸åº”å¤„ç†èŠ‚ç‚¹ï¼Œæ”¯æŒé€€æ¬¾ã€ç´§æ€¥é—®é¢˜å’Œæ™®é€šå’¨è¯¢ã€‚
  mode: workflow
  icon: ğŸ¤–
  icon_background: '#FFEAD5'
workflow:
  graph:
    nodes:
    - id: start
      type: custom
      position:
        x: 0
        y: 0
      data:
        title: å¼€å§‹
        desc: ''
        type: start
        variables:
        - variable: query
          label: query
          type: text-input
          required: true
          options: []
          max_length: 48
    - id: check_refund
      type: custom
      position:
        x: 200
        y: 0
      data:
        title: æ˜¯å¦æ¶‰åŠé€€æ¬¾
        desc: ''
        type: if-else
        logical_operator: and
        conditions:
        - id: 'true'
          variable_selector:
          - start
          - query
          comparison_operator: contains
          value: é€€æ¬¾
          varType: string
    - id: check_urgency
      type: custom
      position:
        x: 400
        y: 0
      data:
        title: æ˜¯å¦ç´§æ€¥
        desc: ''
        type: if-else
        logical_operator: and
        conditions:
        - id: 'true'
          variable_selector:
          - start
          - query
          comparison_operator: contains
          value: ç´§æ€¥
          varType: string
    - id: handle_refund
      type: custom
      position:
        x: 0
        y: 200
      data:
        title: å¤„ç†é€€æ¬¾è¯·æ±‚
        desc: ''
        type: llm
        model:
          provider: openai
          name: gpt-4o
          mode: chat
        vision:
          enabled: false
        memory:
          window:
            enabled: false
            size: 10
        context:
          enabled: false
          variable_selector: []
        prompt_template:
        - role: system
          text: ä½ æ˜¯ä¸€åä¸“ä¸šçš„å®¢æœä»£è¡¨ï¼Œä¸“é—¨å¤„ç†ç”¨æˆ·çš„é€€æ¬¾è¯·æ±‚ã€‚è¯·æ ¹æ®ç”¨æˆ·æä¾›çš„ä¿¡æ¯ï¼Œç¡®è®¤è®¢å•çŠ¶æ€å¹¶æä¾›æ¸…æ™°çš„é€€æ¬¾æŒ‡å¼•ã€‚
        - role: user
          text: '{{#start.query#}}'
    - id: handle_urgent
      type: custom
      position:
        x: 200
        y: 200
      data:
        title: å¤„ç†ç´§æ€¥é—®é¢˜
        desc: ''
        type: llm
        model:
          provider: openai
          name: gpt-4o
          mode: chat
        vision:
          enabled: false
        memory:
          window:
            enabled: false
            size: 10
        context:
          enabled: false
          variable_selector: []
        prompt_template:
        - role: system
          text: ä½ æ­£åœ¨å¤„ç†ä¸€ä¸ªæ ‡è®°ä¸ºç´§æ€¥çš„ç”¨æˆ·é—®é¢˜ã€‚è¯·ç«‹å³å“åº”ï¼Œæä¾›æœ€é«˜ä¼˜å…ˆçº§çš„æ”¯æŒï¼Œå¹¶ç¡®ä¿ç”¨æˆ·æƒ…ç»ªå¾—åˆ°å®‰æŠšã€‚
        - role: user
          text: '{{#start.query#}}'
    - id: handle_general
      type: custom
      position:
        x: 400
        y: 200
      data:
        title: å¤„ç†ä¸€èˆ¬å’¨è¯¢
        desc: ''
        type: llm
        model:
          provider: openai
          name: gpt-4o
          mode: chat
        vision:
          enabled: false
        memory:
          window:
            enabled: false
            size: 10
        context:
          enabled: false
          variable_selector: []
        prompt_template:
        - role: system
          text: ä½ æ˜¯ä¸€åå‹å¥½ä¸”çŸ¥è¯†æ¸Šåšçš„å®¢æœåŠ©æ‰‹ï¼Œè´Ÿè´£å›ç­”ç”¨æˆ·çš„å¸¸è§„é—®é¢˜ã€‚è¯·ä¿æŒä¸“ä¸šã€è€å¿ƒï¼Œå¹¶æä¾›å‡†ç¡®çš„ä¿¡æ¯ã€‚
        - role: user
          text: '{{#start.query#}}'
    - id: end
      type: custom
      position:
        x: 0
        y: 400
      data:
        title: ç»“æŸ
        desc: ''
        type: end
        outputs:
        - variable: response
          value_selector:
          - handle_refund
          - text
          value_type: string
        - variable: response
          value_selector:
          - handle_urgent
          - text
          value_type: string
        - variable: response
          value_selector:
          - handle_general
          - text
          value_type: string
    edges:
    - id: edge_0
      source: start
      target: check_refund
      sourceHandle: source
      targetHandle: target
      type: custom
    - id: edge_1
      source: check_refund
      target: handle_refund
      sourceHandle: 'true'
      targetHandle: target
      type: custom
    - id: edge_2
      source: check_refund
      target: check_urgency
      sourceHandle: 'false'
      targetHandle: target
      type: custom
    - id: edge_3
      source: check_urgency
      target: handle_urgent
      sourceHandle: 'true'
      targetHandle: target
      type: custom
    - id: edge_4
      source: check_urgency
      target: handle_general
      sourceHandle: 'false'
      targetHandle: target
      type: custom
    - id: edge_5
      source: handle_refund
      target: end
      sourceHandle: source
      targetHandle: target
      type: custom
    - id: edge_6
      source: handle_urgent
      target: end
      sourceHandle: source
      targetHandle: target
      type: custom
    - id: edge_7
      source: handle_general
      target: end
      sourceHandle: source
      targetHandle: target
      type: custom
